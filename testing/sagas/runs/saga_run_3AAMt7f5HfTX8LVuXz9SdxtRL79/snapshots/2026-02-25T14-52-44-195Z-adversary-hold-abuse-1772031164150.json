{
  "schemaVersion": "snapshot.v1",
  "screenKey": "adversary-hold-abuse-1772031164150",
  "title": "Adversary attempts demand/hold abuse Snapshot",
  "generatedAt": "2026-02-25T14:52:44.186Z",
  "stepKey": "adversary-hold-abuse",
  "status": "passed",
  "view": {
    "title": "Adversary attempts demand/hold abuse",
    "subtitle": "Repeated unauthorized hold attempts were blocked (403).",
    "blocks": [
      {
        "type": "alert",
        "title": "Adversary Hold Abuse completed",
        "message": "Repeated unauthorized hold attempts were blocked (403).",
        "tone": "success"
      }
    ]
  },
  "rawData": {
    "stepKey": "adversary-hold-abuse",
    "resultPayload": {
      "note": "Repeated unauthorized hold attempts were blocked (403)."
    },
    "apiCalls": [
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAMvBMqJ01QmGsigCoiN5UqGhp/traces",
        "status": 201,
        "requestBody": {
          "stepKey": "owner-create-offer",
          "title": "Create offer shell API Trace",
          "trace": {
            "stepKey": "owner-create-offer",
            "callCount": 3,
            "calls": [
              {
                "method": "POST",
                "path": "/api/v1/sagas/runs/saga_run_3AAMssrnJRyQ7Ie1PAeMZr28BKm/steps/owner-revenue-sanity/result",
                "status": 200,
                "requestBody": {
                  "status": "passed",
                  "startedAt": "2026-02-25T14:52:42.487Z",
                  "endedAt": "2026-02-25T14:52:42.487Z",
                  "failureMessage": null,
                  "resultPayload": {
                    "note": "Revenue sanity computed from booking orders.",
                    "evidence": {
                      "bookingCount": 2,
                      "totalMinor": 30000,
                      "currency": "USD"
                    }
                  },
                  "assertionSummary": {
                    "status": "passed",
                    "hasFailure": false,
                    "assertionsPassed": 1
                  }
                },
                "responseBody": {
                  "success": true,
                  "data": {
                    "id": "saga_run_step_3AAMss5DKn3B29zd7hirbE5dkeJ",
                    "sagaRunId": "saga_run_3AAMssrnJRyQ7Ie1PAeMZr28BKm",
                    "phaseKey": "reporting-and-closeout",
                    "phaseOrder": 8,
                    "phaseTitle": "Reporting And Closeout",
                    "stepKey": "owner-revenue-sanity",
                    "stepOrder": 19,
                    "actorKey": "biz_owner",
                    "instruction": "Read reporting endpoints and verify booking totals, counts, and statuses align with saga actions.",
                    "expectedResult": "Reported metrics match booking actions and highlight any discrepancies for schema/API iteration.",
                    "delayMode": "none",
                    "delayMs": null,
                    "delayConditionKey": null,
                    "delayTimeoutMs": null,
                    "delayPollMs": null,
                    "delayJitterMs": 0,
                    "status": "passed",
                    "attemptCount": 1,
                    "startedAt": "2026-02-25T14:52:42.487Z",
                    "endedAt": "2026-02-25T14:52:42.487Z",
                    "failureCode": null,
                    "failureMessage": null,
                    "resultPayload": {
                      "note": "Revenue sanity computed from booking orders.",
                      "evidence": {
                        "currency": "USD",
                        "totalMinor": 30000,
                        "bookingCount": 2
                      }
                    },
                    "assertionSummary": {
                      "status": "passed",
                      "hasFailure": false,
                      "assertionsPassed": 1
                    },
                    "metadata": {},
                    "createdAt": "2026-02-25T14:52:11.689Z",
                    "updatedAt": "2026-02-25T14:52:11.689Z",
                    "deletedAt": null,
                    "createdBy": null,
                    "updatedBy": null,
                    "deletedBy": null
                  },
                  "meta": {
                    "requestId": "4d3bcb58-c7ce-44dd-9a34-4bce4134b4a1",
                    "timestamp": "2026-02-25T14:52:42.906Z"
                  }
                },
                "at": "2026-02-25T14:52:42.908Z"
              },
              {
                "method": "POST",
                "path": "/api/v1/sagas/runs/saga_run_3AAMtkUuoXySSXG1e1EthcAxUc3/steps/adversary-cross-biz-read/result",
                "status": 200,
                "requestBody": {
                  "status": "in_progress",
                  "startedAt": "2026-02-25T14:52:42.753Z",
                  "resultPayload": {
                    "note": "Started adversary-cross-biz-read"
                  },
                  "assertionSummary": {
                    "status": "in_progress"
                  }
                },
                "responseBody": {
                  "success": true,
                  "data": {
                    "id": "saga_run_step_3AAMtktgYgi4aERJ7J0Iuu2a30U",
                    "sagaRunId": "saga_run_3AAMtkUuoXySSXG1e1EthcAxUc3",
                    "phaseKey": "security-and-abuse",
                    "phaseOrder": 6,
                    "phaseTitle": "Security And Abuse Checks",
                    "stepKey": "adversary-cross-biz-read",
                    "stepOrder": 15,
                    "actorKey": "adversary",
                    "instruction": "Using credentials from another context, attempt to read or mutate booking/order resources for this biz.",
                    "expectedResult": "Request is rejected with forbidden/unauthorized error and no data leakage.",
                    "delayMode": "none",
                    "delayMs": null,
                    "delayConditionKey": null,
                    "delayTimeoutMs": null,
                    "delayPollMs": null,
                    "delayJitterMs": 0,
                    "status": "in_progress",
                    "attemptCount": 1,
                    "startedAt": "2026-02-25T14:52:42.753Z",
                    "endedAt": null,
                    "failureCode": null,
                    "failureMessage": null,
                    "resultPayload": {
                      "note": "Started adversary-cross-biz-read"
                    },
                    "assertionSummary": {
                      "status": "in_progress"
                    },
                    "metadata": {},
                    "createdAt": "2026-02-25T14:52:18.827Z",
                    "updatedAt": "2026-02-25T14:52:18.827Z",
                    "deletedAt": null,
                    "createdBy": null,
                    "updatedBy": null,
                    "deletedBy": null
                  },
                  "meta": {
                    "requestId": "c7d0e831-7582-4aff-b0f8-ba9c7af989e0",
                    "timestamp": "2026-02-25T14:52:42.908Z"
                  }
                },
                "at": "2026-02-25T14:52:42.910Z"
              },
              {
                "method": "POST",
                "path": "/api/v1/bizes/3AAMvmgu4PwkoAAiuDPD0dHPIR8/offers",
                "status": 201,
                "requestBody": {
                  "name": "Primary Service Offer",
                  "slug": "offer-83kh5ogx",
                  "executionMode": "slot",
                  "status": "draft",
                  "isPublished": false,
                  "timezone": "UTC"
                },
                "responseBody": {
                  "success": true,
                  "data": {
                    "id": "offer_3AAMwpUbDhJvN8WykJGCrKdTANB",
                    "bizId": "3AAMvmgu4PwkoAAiuDPD0dHPIR8",
                    "name": "Primary Service Offer",
                    "slug": "offer-83kh5ogx",
                    "description": null,
                    "executionMode": "slot",
                    "executionModeConfigValueId": null,
                    "status": "draft",
                    "statusConfigValueId": null,
                    "isPublished": false,
                    "timezone": "UTC",
                    "metadata": {},
                    "createdAt": "2026-02-25T14:52:42.975Z",
                    "updatedAt": "2026-02-25T14:52:42.975Z",
                    "deletedAt": null,
                    "createdBy": null,
                    "updatedBy": null,
                    "deletedBy": null
                  },
                  "meta": {
                    "requestId": "18a6eb09-bb65-4763-bafb-9d0120d7ff31",
                    "timestamp": "2026-02-25T14:52:42.985Z"
                  }
                },
                "at": "2026-02-25T14:52:42.986Z"
              }
            ]
          },
          "metadata": {
            "source": "rerun-sagas.ts"
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_artifact_3AAMwzLB56YBZS9Ggl1J6nsupW6",
            "sagaRunId": "saga_run_3AAMvBMqJ01QmGsigCoiN5UqGhp",
            "sagaRunStepId": "saga_run_step_3AAMvDTKDdXM85GZj5F1zhB7ND6",
            "artifactType": "api_trace",
            "title": "Create offer shell API Trace",
            "storagePath": "testing/sagas/runs/saga_run_3AAMvBMqJ01QmGsigCoiN5UqGhp/artifacts/1772031163016-Create_offer_shell_API_Trace.json",
            "contentType": "application/json",
            "bodyText": "{\n  \"stepKey\": \"owner-create-offer\",\n  \"callCount\": 3,\n  \"calls\": [\n    {\n      \"method\": \"POST\",\n      \"path\": \"/api/v1/sagas/runs/saga_run_3AAMssrnJRyQ7Ie1PAeMZr28BKm/steps/owner-revenue-sanity/result\",\n      \"status\": 200,\n      \"requestBody\": {\n        \"status\": \"passed\",\n        \"startedAt\": \"2026-02-25T14:52:42.487Z\",\n        \"endedAt\": \"2026-02-25T14:52:42.487Z\",\n        \"failureMessage\": null,\n        \"resultPayload\": {\n          \"note\": \"Revenue sanity computed from booking orders.\",\n          \"evidence\": {\n            \"bookingCount\": 2,\n            \"totalMinor\": 30000,\n            \"currency\": \"USD\"\n          }\n        },\n        \"assertionSummary\": {\n          \"status\": \"passed\",\n          \"hasFailure\": false,\n          \"assertionsPassed\": 1\n        }\n      },\n      \"responseBody\": {\n        \"success\": true,\n        \"data\": {\n          \"id\": \"saga_run_step_3AAMss5DKn3B29zd7hirbE5dkeJ\",\n          \"sagaRunId\": \"saga_run_3AAMssrnJRyQ7Ie1PAeMZr28BKm\",\n          \"phaseKey\": \"reporting-and-closeout\",\n          \"phaseOrder\": 8,\n          \"phaseTitle\": \"Reporting And Closeout\",\n          \"stepKey\": \"owner-revenue-sanity\",\n          \"stepOrder\": 19,\n          \"actorKey\": \"biz_owner\",\n          \"instruction\": \"Read reporting endpoints and verify booking totals, counts, and statuses align with saga actions.\",\n          \"expectedResult\": \"Reported metrics match booking actions and highlight any discrepancies for schema/API iteration.\",\n          \"delayMode\": \"none\",\n          \"delayMs\": null,\n          \"delayConditionKey\": null,\n          \"delayTimeoutMs\": null,\n          \"delayPollMs\": null,\n          \"delayJitterMs\": 0,\n          \"status\": \"passed\",\n          \"attemptCount\": 1,\n          \"startedAt\": \"2026-02-25T14:52:42.487Z\",\n          \"endedAt\": \"2026-02-25T14:52:42.487Z\",\n          \"failureCode\": null,\n          \"failureMessage\": null,\n          \"resultPayload\": {\n            \"note\": \"Revenue sanity computed from booking orders.\",\n            \"evidence\": {\n              \"currency\": \"USD\",\n              \"totalMinor\": 30000,\n              \"bookingCount\": 2\n            }\n          },\n          \"assertionSummary\": {\n            \"status\": \"passed\",\n            \"hasFailure\": false,\n            \"assertionsPassed\": 1\n          },\n          \"metadata\": {},\n          \"createdAt\": \"2026-02-25T14:52:11.689Z\",\n          \"updatedAt\": \"2026-02-25T14:52:11.689Z\",\n          \"deletedAt\": null,\n          \"createdBy\": null,\n          \"updatedBy\": null,\n          \"deletedBy\": null\n        },\n        \"meta\": {\n          \"requestId\": \"4d3bcb58-c7ce-44dd-9a34-4bce4134b4a1\",\n          \"timestamp\": \"2026-02-25T14:52:42.906Z\"\n        }\n      },\n      \"at\": \"2026-02-25T14:52:42.908Z\"\n    },\n    {\n      \"method\": \"POST\",\n      \"path\": \"/api/v1/sagas/runs/saga_run_3AAMtkUuoXySSXG1e1EthcAxUc3/steps/adversary-cross-biz-read/result\",\n      \"status\": 200,\n      \"requestBody\": {\n        \"status\": \"in_progress\",\n        \"startedAt\": \"2026-02-25T14:52:42.753Z\",\n        \"resultPayload\": {\n          \"note\": \"Started adversary-cross-biz-read\"\n        },\n        \"assertionSummary\": {\n          \"status\": \"in_progress\"\n        }\n      },\n      \"responseBody\": {\n        \"success\": true,\n        \"data\": {\n          \"id\": \"saga_run_step_3AAMtktgYgi4aERJ7J0Iuu2a30U\",\n          \"sagaRunId\": \"saga_run_3AAMtkUuoXySSXG1e1EthcAxUc3\",\n          \"phaseKey\": \"security-and-abuse\",\n          \"phaseOrder\": 6,\n          \"phaseTitle\": \"Security And Abuse Checks\",\n          \"stepKey\": \"adversary-cross-biz-read\",\n          \"stepOrder\": 15,\n          \"actorKey\": \"adversary\",\n          \"instruction\": \"Using credentials from another context, attempt to read or mutate booking/order resources for this biz.\",\n          \"expectedResult\": \"Request is rejected with forbidden/unauthorized error and no data leakage.\",\n          \"delayMode\": \"none\",\n          \"delayMs\": null,\n          \"delayConditionKey\": null,\n          \"delayTimeoutMs\": null,\n          \"delayPollMs\": null,\n          \"delayJitterMs\": 0,\n          \"status\": \"in_progress\",\n          \"attemptCount\": 1,\n          \"startedAt\": \"2026-02-25T14:52:42.753Z\",\n          \"endedAt\": null,\n          \"failureCode\": null,\n          \"failureMessage\": null,\n          \"resultPayload\": {\n            \"note\": \"Started adversary-cross-biz-read\"\n          },\n          \"assertionSummary\": {\n            \"status\": \"in_progress\"\n          },\n          \"metadata\": {},\n          \"createdAt\": \"2026-02-25T14:52:18.827Z\",\n          \"updatedAt\": \"2026-02-25T14:52:18.827Z\",\n          \"deletedAt\": null,\n          \"createdBy\": null,\n          \"updatedBy\": null,\n          \"deletedBy\": null\n        },\n        \"meta\": {\n          \"requestId\": \"c7d0e831-7582-4aff-b0f8-ba9c7af989e0\",\n          \"timestamp\": \"2026-02-25T14:52:42.908Z\"\n        }\n      },\n      \"at\": \"2026-02-25T14:52:42.910Z\"\n    },\n    {\n      \"method\": \"POST\",\n      \"path\": \"/api/v1/bizes/3AAMvmgu4PwkoAAiuDPD0dHPIR8/offers\",\n      \"status\": 201,\n      \"requestBody\": {\n        \"name\": \"Primary Service Offer\",\n        \"slug\": \"offer-83kh5ogx\",\n        \"executionMode\": \"slot\",\n        \"status\": \"draft\",\n        \"isPublished\": false,\n        \"timezone\": \"UTC\"\n      },\n      \"responseBody\": {\n        \"success\": true,\n        \"data\": {\n          \"id\": \"offer_3AAMwpUbDhJvN8WykJGCrKdTANB\",\n          \"bizId\": \"3AAMvmgu4PwkoAAiuDPD0dHPIR8\",\n          \"name\": \"Primary Service Offer\",\n          \"slug\": \"offer-83kh5ogx\",\n          \"description\": null,\n          \"executionMode\": \"slot\",\n          \"executionModeConfigValueId\": null,\n          \"status\": \"draft\",\n          \"statusConfigValueId\": null,\n          \"isPublished\": false,\n          \"timezone\": \"UTC\",\n          \"metadata\": {},\n          \"createdAt\": \"2026-02-25T14:52:42.975Z\",\n          \"updatedAt\": \"2026-02-25T14:52:42.975Z\",\n          \"deletedAt\": null,\n          \"createdBy\": null,\n          \"updatedBy\": null,\n          \"deletedBy\": null\n        },\n        \"meta\": {\n          \"requestId\": \"18a6eb09-bb65-4763-bafb-9d0120d7ff31\",\n          \"timestamp\": \"2026-02-25T14:52:42.985Z\"\n        }\n      },\n      \"at\": \"2026-02-25T14:52:42.986Z\"\n    }\n  ]\n}\n",
            "byteSize": 6131,
            "checksum": "b6d9ae52b126563c8dc7b7a02b6bb48cb8bc26743c901bcab63860349fd876b6",
            "capturedAt": "2026-02-25T14:52:43.051Z",
            "metadata": {
              "source": "rerun-sagas.ts"
            },
            "createdAt": "2026-02-25T14:52:43.051Z",
            "updatedAt": "2026-02-25T14:52:43.051Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "a1be8463-8075-4134-a915-6131bf2fea81",
            "timestamp": "2026-02-25T14:52:43.281Z"
          }
        },
        "at": "2026-02-25T14:52:43.282Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/bizes/3AAMtdCfJsZEgd77SKxtG93Uy8b/booking-orders",
        "status": 403,
        "requestBody": {
          "offerId": "offer_3AAMv3EMoLpWH9l1lQYwIb0MAZQ",
          "offerVersionId": "offer_version_3AAMvFrSC05YNZVWfQ1a7uvye0G",
          "status": "draft",
          "subtotalMinor": 1000,
          "taxMinor": 0,
          "feeMinor": 0,
          "discountMinor": 0,
          "totalMinor": 1000,
          "currency": "USD"
        },
        "responseBody": {
          "success": false,
          "error": {
            "code": "FORBIDDEN",
            "message": "You are not a member of this biz."
          },
          "meta": {
            "requestId": "7c7c6ae9-bcb5-467c-a68a-d5f2176c9cce",
            "timestamp": "2026-02-25T14:52:43.288Z"
          }
        },
        "at": "2026-02-25T14:52:43.289Z"
      },
      {
        "method": "GET",
        "path": "/api/auth/get-session",
        "status": 200,
        "responseBody": {
          "session": {
            "expiresAt": "2026-03-04T14:52:43.266Z",
            "token": "lRbkJfYEutUjTTFzVDDNpEu2RzXkdaDC",
            "createdAt": "2026-02-25T14:52:43.266Z",
            "updatedAt": "2026-02-25T14:52:43.266Z",
            "ipAddress": "",
            "userAgent": "node",
            "userId": "1e7aq1ay6rNjoIuSJy03BVAA9O7TG0xc",
            "activeOrganizationId": null,
            "impersonatedBy": null,
            "id": "SKzSjUfqdHNK0501Ja6HXGd5gFPby1U7"
          },
          "user": {
            "name": "member-uc-160-the-franchisee-priya",
            "email": "member-uc-160-the-franchisee-priya-1772031163122-e6v1my@example.com",
            "emailVerified": false,
            "image": null,
            "createdAt": "2026-02-25T14:52:43.246Z",
            "updatedAt": "2026-02-25T14:52:43.246Z",
            "role": "user",
            "banned": false,
            "banReason": null,
            "banExpires": null,
            "id": "1e7aq1ay6rNjoIuSJy03BVAA9O7TG0xc"
          }
        },
        "at": "2026-02-25T14:52:43.301Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAMuSS7eUJT2gRiFb1t9Rfx71F/steps/customer-sign-up/result",
        "status": 200,
        "requestBody": {
          "status": "passed",
          "startedAt": "2026-02-25T14:52:42.886Z",
          "endedAt": "2026-02-25T14:52:42.886Z",
          "failureMessage": null,
          "resultPayload": {
            "note": "Primary customer account created.",
            "evidence": {
              "customerUserId": "9fef6hbNQgNv8nLmwWTVaxnh6CfBBbFP",
              "email": "customer1-uc-16-the-multi-service-bundler-package-paul-1772031162490-1pypvu@example.com"
            }
          },
          "assertionSummary": {
            "status": "passed",
            "hasFailure": false,
            "assertionsPassed": 1
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_run_step_3AAMuOZxer5HfLUXk1wtTiFAcFM",
            "sagaRunId": "saga_run_3AAMuSS7eUJT2gRiFb1t9Rfx71F",
            "phaseKey": "customer-lifecycle",
            "phaseOrder": 5,
            "phaseTitle": "Customer Lifecycle",
            "stepKey": "customer-sign-up",
            "stepOrder": 11,
            "actorKey": "customer_1",
            "instruction": "Create customer account/session and verify customer can browse published offers.",
            "expectedResult": "Customer session established and offer discovery succeeds.",
            "delayMode": "none",
            "delayMs": null,
            "delayConditionKey": null,
            "delayTimeoutMs": null,
            "delayPollMs": null,
            "delayJitterMs": 0,
            "status": "passed",
            "attemptCount": 1,
            "startedAt": "2026-02-25T14:52:42.886Z",
            "endedAt": "2026-02-25T14:52:42.886Z",
            "failureCode": null,
            "failureMessage": null,
            "resultPayload": {
              "note": "Primary customer account created.",
              "evidence": {
                "email": "customer1-uc-16-the-multi-service-bundler-package-paul-1772031162490-1pypvu@example.com",
                "customerUserId": "9fef6hbNQgNv8nLmwWTVaxnh6CfBBbFP"
              }
            },
            "assertionSummary": {
              "status": "passed",
              "hasFailure": false,
              "assertionsPassed": 1
            },
            "metadata": {},
            "createdAt": "2026-02-25T14:52:23.874Z",
            "updatedAt": "2026-02-25T14:52:23.874Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "564443dc-3509-4d92-a056-4b6435966f94",
            "timestamp": "2026-02-25T14:52:43.325Z"
          }
        },
        "at": "2026-02-25T14:52:43.326Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/bizes/3AAMveHUHFNPzVst262L8e80tiV/offers",
        "status": 201,
        "requestBody": {
          "name": "Primary Service Offer",
          "slug": "offer-bzf6mlt6",
          "executionMode": "slot",
          "status": "draft",
          "isPublished": false,
          "timezone": "UTC"
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "offer_3AAMwwO3uNfpoq0gYVFabbNkebK",
            "bizId": "3AAMveHUHFNPzVst262L8e80tiV",
            "name": "Primary Service Offer",
            "slug": "offer-bzf6mlt6",
            "description": null,
            "executionMode": "slot",
            "executionModeConfigValueId": null,
            "status": "draft",
            "statusConfigValueId": null,
            "isPublished": false,
            "timezone": "UTC",
            "metadata": {},
            "createdAt": "2026-02-25T14:52:43.319Z",
            "updatedAt": "2026-02-25T14:52:43.319Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "34e6b0ed-190b-41b5-8a53-32e94458f172",
            "timestamp": "2026-02-25T14:52:43.330Z"
          }
        },
        "at": "2026-02-25T14:52:43.331Z"
      }
    ]
  },
  "metadata": {}
}
