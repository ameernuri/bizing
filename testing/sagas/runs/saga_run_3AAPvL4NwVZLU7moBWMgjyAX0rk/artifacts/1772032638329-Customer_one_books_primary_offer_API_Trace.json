{
  "stepKey": "customer-book-primary",
  "callCount": 4,
  "calls": [
    {
      "method": "POST",
      "path": "/api/v1/sagas/runs/saga_run_3AAPw1LguEooXEY7IMszqd4rJTn/steps/owner-create-location/result",
      "status": 200,
      "requestBody": {
        "status": "in_progress",
        "startedAt": "2026-02-25T15:17:18.121Z",
        "resultPayload": {
          "note": "Started owner-create-location"
        },
        "assertionSummary": {
          "status": "in_progress"
        }
      },
      "responseBody": {
        "success": true,
        "data": {
          "id": "saga_run_step_3AAPw2OMWaUedXy9fL4OOCn4crV",
          "sagaRunId": "saga_run_3AAPw1LguEooXEY7IMszqd4rJTn",
          "phaseKey": "owner-onboarding",
          "phaseOrder": 1,
          "phaseTitle": "Owner Onboarding",
          "stepKey": "owner-create-location",
          "stepOrder": 3,
          "actorKey": "biz_owner",
          "instruction": "Create a primary location for the biz and set timezone aligned with scenario context.",
          "expectedResult": "Location exists and is associated with the new biz.",
          "delayMode": "none",
          "delayMs": null,
          "delayConditionKey": null,
          "delayTimeoutMs": null,
          "delayPollMs": null,
          "delayJitterMs": 0,
          "status": "in_progress",
          "attemptCount": 1,
          "startedAt": "2026-02-25T15:17:18.121Z",
          "endedAt": null,
          "failureCode": null,
          "failureMessage": null,
          "resultPayload": {
            "note": "Started owner-create-location"
          },
          "assertionSummary": {
            "status": "in_progress"
          },
          "metadata": {},
          "createdAt": "2026-02-25T15:17:16.121Z",
          "updatedAt": "2026-02-25T15:17:16.121Z",
          "deletedAt": null,
          "createdBy": null,
          "updatedBy": null,
          "deletedBy": null
        },
        "meta": {
          "requestId": "725af9d9-011a-4b17-9585-81a8bbae22bb",
          "timestamp": "2026-02-25T15:17:18.299Z"
        }
      },
      "at": "2026-02-25T15:17:18.300Z"
    },
    {
      "method": "POST",
      "path": "/api/v1/sagas/runs/saga_run_3AAPtnlzZ7SXxzSyyqWMBN8YF0n/steps/persona-scenario-validate-1/result",
      "status": 200,
      "requestBody": {
        "status": "skipped",
        "startedAt": "2026-02-25T15:17:18.047Z",
        "endedAt": "2026-02-25T15:17:18.047Z",
        "failureMessage": "Exploratory validation step skipped by deterministic runner (semantic/manual review step).",
        "resultPayload": {
          "note": "Step skipped: Exploratory validation step skipped by deterministic runner (semantic/manual review step).",
          "evidence": {
            "error": "Exploratory validation step skipped by deterministic runner (semantic/manual review step).",
            "failed": false,
            "blocked": false,
            "skipped": true,
            "stepFamily": "persona-scenario-validation",
            "reasonCode": "DETERMINISTIC_RUNNER_SKIPS_EXPLORATORY_STEP"
          }
        },
        "assertionSummary": {
          "status": "skipped",
          "hasFailure": true,
          "assertionsPassed": 0
        }
      },
      "responseBody": {
        "success": true,
        "data": {
          "id": "saga_run_step_3AAPtlEzKtIlzcbV4C5zKa7NWG4",
          "sagaRunId": "saga_run_3AAPtnlzZ7SXxzSyyqWMBN8YF0n",
          "phaseKey": "reporting-and-closeout",
          "phaseOrder": 8,
          "phaseTitle": "Reporting And Closeout",
          "stepKey": "persona-scenario-validate-1",
          "stepOrder": 29,
          "actorKey": "customer_1",
          "instruction": "Simulate this persona scenario and validate outcome deterministically: \"Accidentally posts data to wrong biz\". Capture traces and snapshots so coverage can be audited later.",
          "expectedResult": "Scenario behavior is either confirmed as supported or produces a clear, actionable failure report.",
          "delayMode": "none",
          "delayMs": null,
          "delayConditionKey": null,
          "delayTimeoutMs": null,
          "delayPollMs": null,
          "delayJitterMs": 0,
          "status": "skipped",
          "attemptCount": 1,
          "startedAt": "2026-02-25T15:17:18.047Z",
          "endedAt": "2026-02-25T15:17:18.047Z",
          "failureCode": null,
          "failureMessage": "Exploratory validation step skipped by deterministic runner (semantic/manual review step).",
          "resultPayload": {
            "note": "Step skipped: Exploratory validation step skipped by deterministic runner (semantic/manual review step).",
            "evidence": {
              "error": "Exploratory validation step skipped by deterministic runner (semantic/manual review step).",
              "failed": false,
              "blocked": false,
              "skipped": true,
              "reasonCode": "DETERMINISTIC_RUNNER_SKIPS_EXPLORATORY_STEP",
              "stepFamily": "persona-scenario-validation"
            }
          },
          "assertionSummary": {
            "status": "skipped",
            "hasFailure": true,
            "assertionsPassed": 0
          },
          "metadata": {},
          "createdAt": "2026-02-25T15:16:58.876Z",
          "updatedAt": "2026-02-25T15:16:58.876Z",
          "deletedAt": null,
          "createdBy": null,
          "updatedBy": null,
          "deletedBy": null
        },
        "meta": {
          "requestId": "807e8bfb-bee5-497b-971a-e936f31a1a3d",
          "timestamp": "2026-02-25T15:17:18.309Z"
        }
      },
      "at": "2026-02-25T15:17:18.312Z"
    },
    {
      "method": "POST",
      "path": "/api/v1/sagas/runs/saga_run_3AAPvx3aC8N4abziUg268PyTsRH/traces",
      "status": 201,
      "requestBody": {
        "stepKey": "owner-configure-pricing",
        "title": "Configure default pricing rules API Trace",
        "trace": {
          "stepKey": "owner-configure-pricing",
          "callCount": 2,
          "calls": [
            {
              "method": "POST",
              "path": "/api/v1/sagas/runs/saga_run_3AAPvL4NwVZLU7moBWMgjyAX0rk/steps/customer-sign-up/result",
              "status": 200,
              "requestBody": {
                "status": "passed",
                "startedAt": "2026-02-25T15:17:17.926Z",
                "endedAt": "2026-02-25T15:17:17.926Z",
                "failureMessage": null,
                "resultPayload": {
                  "note": "Primary customer account created.",
                  "evidence": {
                    "customerUserId": "nhRWxeZYhKc8OcVqRwchma1euKKklyqU",
                    "email": "customer1-uc-92-the-notification-ninja-notifying-nora-1772032637683-s47fph@example.com"
                  }
                },
                "assertionSummary": {
                  "status": "passed",
                  "hasFailure": false,
                  "assertionsPassed": 1
                }
              },
              "responseBody": {
                "success": true,
                "data": {
                  "id": "saga_run_step_3AAPvMWotexLS3A65UZTH5j8eCK",
                  "sagaRunId": "saga_run_3AAPvL4NwVZLU7moBWMgjyAX0rk",
                  "phaseKey": "customer-lifecycle",
                  "phaseOrder": 5,
                  "phaseTitle": "Customer Lifecycle",
                  "stepKey": "customer-sign-up",
                  "stepOrder": 11,
                  "actorKey": "customer_1",
                  "instruction": "Create customer account/session and verify customer can browse published offers.",
                  "expectedResult": "Customer session established and offer discovery succeeds.",
                  "delayMode": "none",
                  "delayMs": null,
                  "delayConditionKey": null,
                  "delayTimeoutMs": null,
                  "delayPollMs": null,
                  "delayJitterMs": 0,
                  "status": "passed",
                  "attemptCount": 1,
                  "startedAt": "2026-02-25T15:17:17.926Z",
                  "endedAt": "2026-02-25T15:17:17.926Z",
                  "failureCode": null,
                  "failureMessage": null,
                  "resultPayload": {
                    "note": "Primary customer account created.",
                    "evidence": {
                      "email": "customer1-uc-92-the-notification-ninja-notifying-nora-1772032637683-s47fph@example.com",
                      "customerUserId": "nhRWxeZYhKc8OcVqRwchma1euKKklyqU"
                    }
                  },
                  "assertionSummary": {
                    "status": "passed",
                    "hasFailure": false,
                    "assertionsPassed": 1
                  },
                  "metadata": {},
                  "createdAt": "2026-02-25T15:17:10.839Z",
                  "updatedAt": "2026-02-25T15:17:10.839Z",
                  "deletedAt": null,
                  "createdBy": null,
                  "updatedBy": null,
                  "deletedBy": null
                },
                "meta": {
                  "requestId": "6fdffca8-dad4-4898-a514-d9f78632d42f",
                  "timestamp": "2026-02-25T15:17:18.091Z"
                }
              },
              "at": "2026-02-25T15:17:18.092Z"
            },
            {
              "method": "PATCH",
              "path": "/api/v1/bizes/3AAPw6mR7fk8HRxjpyDHAjQEJqH",
              "status": 200,
              "requestBody": {
                "metadata": {
                  "availability": {
                    "timezone": "UTC",
                    "weekly": {
                      "mon": [
                        "09:00-17:00"
                      ],
                      "tue": [
                        "09:00-17:00"
                      ],
                      "wed": [
                        "09:00-17:00"
                      ],
                      "thu": [
                        "09:00-17:00"
                      ],
                      "fri": [
                        "09:00-17:00"
                      ]
                    },
                    "leadTimeHours": 24,
                    "maxAdvanceDays": 60
                  },
                  "pricing": {
                    "baseCurrency": "USD",
                    "callFeeMinor": 5000,
                    "surgeManualEnabled": true
                  }
                }
              },
              "responseBody": {
                "success": true,
                "data": {
                  "id": "3AAPw6mR7fk8HRxjpyDHAjQEJqH",
                  "name": "Saga uc-92-the-third-party-partner-partner-pete",
                  "slug": "uc-92-the-third-party-partner-partner-pete-1szmc27u",
                  "type": "small_business",
                  "logoUrl": null,
                  "timezone": "UTC",
                  "currency": "USD",
                  "status": "active",
                  "metadata": {
                    "pricing": {
                      "baseCurrency": "USD",
                      "callFeeMinor": 5000,
                      "surgeManualEnabled": true
                    },
                    "availability": {
                      "weekly": {
                        "fri": [
                          "09:00-17:00"
                        ],
                        "mon": [
                          "09:00-17:00"
                        ],
                        "thu": [
                          "09:00-17:00"
                        ],
                        "tue": [
                          "09:00-17:00"
                        ],
                        "wed": [
                          "09:00-17:00"
                        ]
                      },
                      "timezone": "UTC",
                      "leadTimeHours": 24,
                      "maxAdvanceDays": 60
                    }
                  },
                  "createdAt": "2026-02-25T15:17:16.710Z",
                  "updatedAt": "2026-02-25T15:17:16.710Z",
                  "deletedAt": null,
                  "createdBy": null,
                  "updatedBy": null,
                  "deletedBy": null
                },
                "meta": {
                  "requestId": "afa21931-9790-49bf-aedc-0b220bd3dccc",
                  "timestamp": "2026-02-25T15:17:18.105Z"
                }
              },
              "at": "2026-02-25T15:17:18.106Z"
            }
          ]
        },
        "metadata": {
          "source": "rerun-sagas.ts"
        }
      },
      "responseBody": {
        "success": true,
        "data": {
          "id": "saga_artifact_3AAPwLzUymVyfFHBYAdfbtlhS1I",
          "sagaRunId": "saga_run_3AAPvx3aC8N4abziUg268PyTsRH",
          "sagaRunStepId": "saga_run_step_3AAPvvrZ8D0QpUnnRephGE4Mj8G",
          "artifactType": "api_trace",
          "title": "Configure default pricing rules API Trace",
          "storagePath": "testing/sagas/runs/saga_run_3AAPvx3aC8N4abziUg268PyTsRH/artifacts/1772032638118-Configure_default_pricing_rules_API_Trace.json",
          "contentType": "application/json",
          "bodyText": "{\n  \"stepKey\": \"owner-configure-pricing\",\n  \"callCount\": 2,\n  \"calls\": [\n    {\n      \"method\": \"POST\",\n      \"path\": \"/api/v1/sagas/runs/saga_run_3AAPvL4NwVZLU7moBWMgjyAX0rk/steps/customer-sign-up/result\",\n      \"status\": 200,\n      \"requestBody\": {\n        \"status\": \"passed\",\n        \"startedAt\": \"2026-02-25T15:17:17.926Z\",\n        \"endedAt\": \"2026-02-25T15:17:17.926Z\",\n        \"failureMessage\": null,\n        \"resultPayload\": {\n          \"note\": \"Primary customer account created.\",\n          \"evidence\": {\n            \"customerUserId\": \"nhRWxeZYhKc8OcVqRwchma1euKKklyqU\",\n            \"email\": \"customer1-uc-92-the-notification-ninja-notifying-nora-1772032637683-s47fph@example.com\"\n          }\n        },\n        \"assertionSummary\": {\n          \"status\": \"passed\",\n          \"hasFailure\": false,\n          \"assertionsPassed\": 1\n        }\n      },\n      \"responseBody\": {\n        \"success\": true,\n        \"data\": {\n          \"id\": \"saga_run_step_3AAPvMWotexLS3A65UZTH5j8eCK\",\n          \"sagaRunId\": \"saga_run_3AAPvL4NwVZLU7moBWMgjyAX0rk\",\n          \"phaseKey\": \"customer-lifecycle\",\n          \"phaseOrder\": 5,\n          \"phaseTitle\": \"Customer Lifecycle\",\n          \"stepKey\": \"customer-sign-up\",\n          \"stepOrder\": 11,\n          \"actorKey\": \"customer_1\",\n          \"instruction\": \"Create customer account/session and verify customer can browse published offers.\",\n          \"expectedResult\": \"Customer session established and offer discovery succeeds.\",\n          \"delayMode\": \"none\",\n          \"delayMs\": null,\n          \"delayConditionKey\": null,\n          \"delayTimeoutMs\": null,\n          \"delayPollMs\": null,\n          \"delayJitterMs\": 0,\n          \"status\": \"passed\",\n          \"attemptCount\": 1,\n          \"startedAt\": \"2026-02-25T15:17:17.926Z\",\n          \"endedAt\": \"2026-02-25T15:17:17.926Z\",\n          \"failureCode\": null,\n          \"failureMessage\": null,\n          \"resultPayload\": {\n            \"note\": \"Primary customer account created.\",\n            \"evidence\": {\n              \"email\": \"customer1-uc-92-the-notification-ninja-notifying-nora-1772032637683-s47fph@example.com\",\n              \"customerUserId\": \"nhRWxeZYhKc8OcVqRwchma1euKKklyqU\"\n            }\n          },\n          \"assertionSummary\": {\n            \"status\": \"passed\",\n            \"hasFailure\": false,\n            \"assertionsPassed\": 1\n          },\n          \"metadata\": {},\n          \"createdAt\": \"2026-02-25T15:17:10.839Z\",\n          \"updatedAt\": \"2026-02-25T15:17:10.839Z\",\n          \"deletedAt\": null,\n          \"createdBy\": null,\n          \"updatedBy\": null,\n          \"deletedBy\": null\n        },\n        \"meta\": {\n          \"requestId\": \"6fdffca8-dad4-4898-a514-d9f78632d42f\",\n          \"timestamp\": \"2026-02-25T15:17:18.091Z\"\n        }\n      },\n      \"at\": \"2026-02-25T15:17:18.092Z\"\n    },\n    {\n      \"method\": \"PATCH\",\n      \"path\": \"/api/v1/bizes/3AAPw6mR7fk8HRxjpyDHAjQEJqH\",\n      \"status\": 200,\n      \"requestBody\": {\n        \"metadata\": {\n          \"availability\": {\n            \"timezone\": \"UTC\",\n            \"weekly\": {\n              \"mon\": [\n                \"09:00-17:00\"\n              ],\n              \"tue\": [\n                \"09:00-17:00\"\n              ],\n              \"wed\": [\n                \"09:00-17:00\"\n              ],\n              \"thu\": [\n                \"09:00-17:00\"\n              ],\n              \"fri\": [\n                \"09:00-17:00\"\n              ]\n            },\n            \"leadTimeHours\": 24,\n            \"maxAdvanceDays\": 60\n          },\n          \"pricing\": {\n            \"baseCurrency\": \"USD\",\n            \"callFeeMinor\": 5000,\n            \"surgeManualEnabled\": true\n          }\n        }\n      },\n      \"responseBody\": {\n        \"success\": true,\n        \"data\": {\n          \"id\": \"3AAPw6mR7fk8HRxjpyDHAjQEJqH\",\n          \"name\": \"Saga uc-92-the-third-party-partner-partner-pete\",\n          \"slug\": \"uc-92-the-third-party-partner-partner-pete-1szmc27u\",\n          \"type\": \"small_business\",\n          \"logoUrl\": null,\n          \"timezone\": \"UTC\",\n          \"currency\": \"USD\",\n          \"status\": \"active\",\n          \"metadata\": {\n            \"pricing\": {\n              \"baseCurrency\": \"USD\",\n              \"callFeeMinor\": 5000,\n              \"surgeManualEnabled\": true\n            },\n            \"availability\": {\n              \"weekly\": {\n                \"fri\": [\n                  \"09:00-17:00\"\n                ],\n                \"mon\": [\n                  \"09:00-17:00\"\n                ],\n                \"thu\": [\n                  \"09:00-17:00\"\n                ],\n                \"tue\": [\n                  \"09:00-17:00\"\n                ],\n                \"wed\": [\n                  \"09:00-17:00\"\n                ]\n              },\n              \"timezone\": \"UTC\",\n              \"leadTimeHours\": 24,\n              \"maxAdvanceDays\": 60\n            }\n          },\n          \"createdAt\": \"2026-02-25T15:17:16.710Z\",\n          \"updatedAt\": \"2026-02-25T15:17:16.710Z\",\n          \"deletedAt\": null,\n          \"createdBy\": null,\n          \"updatedBy\": null,\n          \"deletedBy\": null\n        },\n        \"meta\": {\n          \"requestId\": \"afa21931-9790-49bf-aedc-0b220bd3dccc\",\n          \"timestamp\": \"2026-02-25T15:17:18.105Z\"\n        }\n      },\n      \"at\": \"2026-02-25T15:17:18.106Z\"\n    }\n  ]\n}\n",
          "byteSize": 5231,
          "checksum": "8a66e0518fe891a4bcf88dacf98746d6363f8eb59ba20136f642f30d277e9d5e",
          "capturedAt": "2026-02-25T15:17:18.237Z",
          "metadata": {
            "source": "rerun-sagas.ts"
          },
          "createdAt": "2026-02-25T15:17:18.237Z",
          "updatedAt": "2026-02-25T15:17:18.237Z",
          "deletedAt": null,
          "createdBy": null,
          "updatedBy": null,
          "deletedBy": null
        },
        "meta": {
          "requestId": "5348ba62-ac4b-47a4-9518-fb423babafed",
          "timestamp": "2026-02-25T15:17:18.311Z"
        }
      },
      "at": "2026-02-25T15:17:18.313Z"
    },
    {
      "method": "POST",
      "path": "/api/v1/public/bizes/3AAPvZxIMzbjfuas51yBr351eYE/booking-orders",
      "status": 201,
      "requestBody": {
        "offerId": "offer_3AAPw0rfCWVfIEqgw3c4RBxTWGq",
        "offerVersionId": "offer_version_3AAPw6YnL0Y2JVOP0gK8TWV5lu0",
        "customerUserId": "nhRWxeZYhKc8OcVqRwchma1euKKklyqU",
        "status": "confirmed",
        "subtotalMinor": 15000,
        "taxMinor": 0,
        "feeMinor": 0,
        "discountMinor": 0,
        "totalMinor": 15000,
        "currency": "USD",
        "requestedStartAt": "2026-02-26T15:17:18.296Z",
        "requestedEndAt": "2026-02-26T16:07:18.296Z",
        "confirmedStartAt": "2026-02-26T15:17:18.296Z",
        "confirmedEndAt": "2026-02-26T16:07:18.296Z"
      },
      "responseBody": {
        "success": true,
        "data": {
          "id": "booking_order_3AAPwFGzLPdsU2VmPCeGBIcyfCF",
          "bizId": "3AAPvZxIMzbjfuas51yBr351eYE",
          "offerId": "offer_3AAPw0rfCWVfIEqgw3c4RBxTWGq",
          "offerVersionId": "offer_version_3AAPw6YnL0Y2JVOP0gK8TWV5lu0",
          "customerUserId": "nhRWxeZYhKc8OcVqRwchma1euKKklyqU",
          "customerGroupAccountId": null,
          "status": "confirmed",
          "statusConfigValueId": null,
          "currency": "USD",
          "subtotalMinor": 15000,
          "taxMinor": 0,
          "feeMinor": 0,
          "discountMinor": 0,
          "totalMinor": 15000,
          "requestedStartAt": "2026-02-26T15:17:18.296Z",
          "requestedEndAt": "2026-02-26T16:07:18.296Z",
          "confirmedStartAt": "2026-02-26T15:17:18.296Z",
          "confirmedEndAt": "2026-02-26T16:07:18.296Z",
          "pricingSnapshot": {},
          "policySnapshot": {},
          "metadata": {},
          "createdAt": "2026-02-25T15:17:18.311Z",
          "updatedAt": "2026-02-25T15:17:18.311Z",
          "deletedAt": null,
          "createdBy": null,
          "updatedBy": null,
          "deletedBy": null
        },
        "meta": {
          "requestId": "a19482b0-e23b-4d12-b0c1-14024b3d2ecb",
          "timestamp": "2026-02-25T15:17:18.316Z"
        }
      },
      "at": "2026-02-25T15:17:18.316Z"
    }
  ]
}
