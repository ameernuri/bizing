{
  "schemaVersion": "snapshot.v1",
  "screenKey": "owner-review-route-dispatch-state-1772032122736",
  "title": "Review route/dispatch operational state Snapshot",
  "generatedAt": "2026-02-25T15:08:42.750Z",
  "stepKey": "owner-review-route-dispatch-state",
  "status": "passed",
  "view": {
    "title": "Review route/dispatch operational state",
    "subtitle": "Route/dispatch capability detected via tool registry.",
    "blocks": [
      {
        "type": "alert",
        "title": "Owner Review Route Dispatch State completed",
        "message": "Route/dispatch capability detected via tool registry.",
        "tone": "success"
      },
      {
        "type": "stats",
        "title": "What user sees at a glance",
        "items": [
          {
            "label": "DetectedToolCount",
            "value": "92"
          }
        ]
      },
      {
        "type": "key_value",
        "title": "Screen details",
        "items": [
          {
            "label": "DetectedToolCount",
            "value": "92"
          }
        ]
      }
    ]
  },
  "rawData": {
    "stepKey": "owner-review-route-dispatch-state",
    "resultPayload": {
      "note": "Route/dispatch capability detected via tool registry.",
      "evidence": {
        "detectedToolCount": 92
      }
    },
    "apiCalls": [
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAOs3pLE1txaGvxrqVZzBvxpSv/steps/customer-book-primary/result",
        "status": 200,
        "requestBody": {
          "status": "passed",
          "startedAt": "2026-02-25T15:08:41.508Z",
          "endedAt": "2026-02-25T15:08:41.508Z",
          "failureMessage": null,
          "resultPayload": {
            "note": "Primary booking created.",
            "evidence": {
              "id": "booking_order_3AAOtNIL0hw2y1g2yKJdamuQmfB",
              "bizId": "3AAOsNvE6l2H4J0FihzQAo7iYOc",
              "offerId": "offer_3AAOt0O1sfRuOrXT1L7lzCaAVLD",
              "offerVersionId": "offer_version_3AAOsx74yLyD3tAPBsyesMW3eSA",
              "customerUserId": "DBrCC5HNghLravTzDKwQ2AGp9HTqY1w7",
              "customerGroupAccountId": null,
              "status": "confirmed",
              "statusConfigValueId": null,
              "currency": "USD",
              "subtotalMinor": 15000,
              "taxMinor": 0,
              "feeMinor": 0,
              "discountMinor": 0,
              "totalMinor": 15000,
              "requestedStartAt": "2026-02-26T15:08:41.338Z",
              "requestedEndAt": "2026-02-26T15:58:41.338Z",
              "confirmedStartAt": "2026-02-26T15:08:41.338Z",
              "confirmedEndAt": "2026-02-26T15:58:41.338Z",
              "pricingSnapshot": {},
              "policySnapshot": {},
              "metadata": {},
              "createdAt": "2026-02-25T15:08:41.365Z",
              "updatedAt": "2026-02-25T15:08:41.365Z",
              "deletedAt": null,
              "createdBy": null,
              "updatedBy": null,
              "deletedBy": null
            }
          },
          "assertionSummary": {
            "status": "passed",
            "hasFailure": false,
            "assertionsPassed": 1
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_run_step_3AAOs1MqQeg9A3qZ9HxhXc4uRub",
            "sagaRunId": "saga_run_3AAOs3pLE1txaGvxrqVZzBvxpSv",
            "phaseKey": "customer-lifecycle",
            "phaseOrder": 5,
            "phaseTitle": "Customer Lifecycle",
            "stepKey": "customer-book-primary",
            "stepOrder": 12,
            "actorKey": "customer_1",
            "instruction": "Create a booking order using the published offer version with realistic times and monetary totals.",
            "expectedResult": "Booking order is created and linked to offer/offer version with coherent totals.",
            "delayMode": "none",
            "delayMs": null,
            "delayConditionKey": null,
            "delayTimeoutMs": null,
            "delayPollMs": null,
            "delayJitterMs": 0,
            "status": "passed",
            "attemptCount": 1,
            "startedAt": "2026-02-25T15:08:41.508Z",
            "endedAt": "2026-02-25T15:08:41.508Z",
            "failureCode": null,
            "failureMessage": null,
            "resultPayload": {
              "note": "Primary booking created.",
              "evidence": {
                "id": "booking_order_3AAOtNIL0hw2y1g2yKJdamuQmfB",
                "bizId": "3AAOsNvE6l2H4J0FihzQAo7iYOc",
                "status": "confirmed",
                "offerId": "offer_3AAOt0O1sfRuOrXT1L7lzCaAVLD",
                "currency": "USD",
                "feeMinor": 0,
                "metadata": {},
                "taxMinor": 0,
                "createdAt": "2026-02-25T15:08:41.365Z",
                "createdBy": null,
                "deletedAt": null,
                "deletedBy": null,
                "updatedAt": "2026-02-25T15:08:41.365Z",
                "updatedBy": null,
                "totalMinor": 15000,
                "discountMinor": 0,
                "subtotalMinor": 15000,
                "confirmedEndAt": "2026-02-26T15:58:41.338Z",
                "customerUserId": "DBrCC5HNghLravTzDKwQ2AGp9HTqY1w7",
                "offerVersionId": "offer_version_3AAOsx74yLyD3tAPBsyesMW3eSA",
                "policySnapshot": {},
                "requestedEndAt": "2026-02-26T15:58:41.338Z",
                "pricingSnapshot": {},
                "confirmedStartAt": "2026-02-26T15:08:41.338Z",
                "requestedStartAt": "2026-02-26T15:08:41.338Z",
                "statusConfigValueId": null,
                "customerGroupAccountId": null
              }
            },
            "assertionSummary": {
              "status": "passed",
              "hasFailure": false,
              "assertionsPassed": 1
            },
            "metadata": {},
            "createdAt": "2026-02-25T15:08:31.955Z",
            "updatedAt": "2026-02-25T15:08:31.955Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "4150cf84-531f-4137-86a5-bb3eed01f352",
            "timestamp": "2026-02-25T15:08:42.128Z"
          }
        },
        "at": "2026-02-25T15:08:42.129Z"
      },
      {
        "method": "GET",
        "path": "/api/v1/agents/tools",
        "status": 200,
        "responseBody": {
          "_truncated": true,
          "_preview": "{\"success\":true,\"data\":[{\"name\":\"bizing.bizes.list\",\"description\":\"List bizes available to the authenticated user.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes\",\"tags\":[\"bizes\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"page\":{\"type\":\"number\",\"default\":1},\"perPage\":{\"type\":\"number\",\"default\":20},\"status\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"}}}},{\"name\":\"bizing.bizes.create\",\"description\":\"Create a biz and make current user owner.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes\",\"tags\":[\"bizes\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"slug\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"timezone\":{\"type\":\"string\"},\"currency\":{\"type\":\"string\"}},\"required\":[\"name\",\"slug\"]}},{\"name\":\"bizing.auth.me\",\"description\":\"Get authenticated user context, memberships, active biz, and effective permissions.\",\"method\":\"GET\",\"path\":\"/api/v1/auth/me\",\"tags\":[\"auth\",\"acl\"],\"parameters\":{\"type\":\"object\",\"properties\":{}}},{\"name\":\"bizing.auth.switchActiveBiz\",\"description\":\"Switch active biz context for the current session.\",\"method\":\"PATCH\",\"path\":\"/api/v1/auth/active-biz\",\"tags\":[\"auth\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.auth.apiKeys.list\",\"description\":\"List machine API keys owned by current user.\",\"method\":\"GET\",\"path\":\"/api/v1/auth/api-keys\",\"tags\":[\"auth\",\"machine\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"includeRevoked\":{\"type\":\"boolean\",\"default\":false},\"bizId\":{\"type\":\"string\"},\"limit\":{\"type\":\"number\",\"default\":100}}}},{\"name\":\"bizing.auth.apiKeys.create\",\"description\":\"Create one machine API key (raw secret returned once).\",\"method\":\"POST\",\"path\":\"/api/v1/auth/api-keys\",\"tags\":[\"auth\",\"machine\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"label\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"bizId\":{\"type\":\"string\"},\"scopes\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"expiresAt\":{\"type\":\"string\",\"description\":\"ISO datetime\"},\"allowDirectApiKeyAuth\":{\"type\":\"boolean\",\"default\":false},\"metadata\":{\"type\":\"object\"}},\"required\":[\"label\"]}},{\"name\":\"bizing.auth.apiKeys.revoke\",\"description\":\"Revoke one API key and all child short-lived tokens.\",\"method\":\"POST\",\"path\":\"/api/v1/auth/api-keys/{apiCredentialId}/revoke\",\"tags\":[\"auth\",\"machine\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"apiCredentialId\":{\"type\":\"string\"},\"reason\":{\"type\":\"string\"}},\"required\":[\"apiCredentialId\"]}},{\"name\":\"bizing.auth.tokens.exchange\",\"description\":\"Exchange an API key for a short-lived bearer token. Supports session + apiCredentialId or direct x-api-key auth.\",\"method\":\"POST\",\"path\":\"/api/v1/auth/tokens/exchange\",\"tags\":[\"auth\",\"machine\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"apiCredentialId\":{\"type\":\"string\"},\"apiKey\":{\"type\":\"string\"},\"scopes\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"ttlSeconds\":{\"type\":\"number\",\"default\":900},\"bizId\":{\"type\":\"string\"},\"reason\":{\"type\":\"string\"}}}},{\"name\":\"bizing.auth.tokens.revoke\",\"description\":\"Revoke one short-lived machine access token.\",\"method\":\"POST\",\"path\":\"/api/v1/auth/tokens/{tokenId}/revoke\",\"tags\":[\"auth\",\"machine\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"tokenId\":{\"type\":\"string\"},\"reason\":{\"type\":\"string\"}},\"required\":[\"tokenId\"]}},{\"name\":\"bizing.acl.biz.roles.list\",\"description\":\"List ACL role definitions available to one biz.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/acl/roles\",\"tags\":[\"acl\",\"biz\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.acl.biz.roles.create\",\"description\":\"Create biz/location/resource/subject scoped ACL role definition.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/acl/roles\",\"tags\":[\"acl\",\"biz\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"roleKey\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"scopeType\":{\"type\":\"string\",\"enum\":[\"biz\",\"location\",\"resource\",\"subject\"]},\"locationId\":{\"type\":\"string\"},\"resourceId\":{\"type\":\"string\"},\"scopeSubjectType\":{\"type\":\"string\"},\"scopeSubjectId\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"}},\"required\":[\"bizId\",\"roleKey\",\"name\"]}},{\"name\":\"bizing.acl.biz.rolePermissions.replace\",\"description\":\"Replace/update one biz role permission set.\",\"method\":\"PUT\",\"path\":\"/api/v1/bizes/{bizId}/acl/roles/{roleId}/permissions\",\"tags\":[\"acl\",\"biz\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"roleId\":{\"type\":\"string\"},\"permissions\":{\"type\":\"array\",\"items\":{\"type\":\"object\"}}},\"required\":[\"bizId\",\"roleId\",\"permissions\"]}},{\"name\":\"bizing.acl.biz.assignments.create\",\"description\":\"Assign ACL role to a user at biz/location/resource/subject scope.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/acl/assignments\",\"tags\":[\"acl\",\"biz\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"userId\":{\"type\":\"string\"},\"roleDefinitionId\":{\"type\":\"string\"},\"scopeType\":{\"type\":\"string\",\"enum\":[\"biz\",\"location\",\"resource\",\"subject\"]},\"locationId\":{\"type\":\"string\"},\"resourceId\":{\"type\":\"string\"},\"scopeSubjectType\":{\"type\":\"string\"},\"scopeSubjectId\":{\"type\":\"string\"}},\"required\":[\"bizId\",\"userId\",\"roleDefinitionId\"]}},{\"name\":\"bizing.acl.biz.mappings.replace\",\"description\":\"Replace membership role -> ACL role mappings for one biz.\",\"method\":\"PUT\",\"path\":\"/api/v1/bizes/{bizId}/acl/membership-mappings\",\"tags\":[\"acl\",\"biz\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"mappings\":{\"type\":\"array\",\"items\":{\"type\":\"object\"}}},\"required\":[\"bizId\",\"mappings\"]}},{\"name\":\"bizing.acl.platform.roles.list\",\"description\":\"List platform-level ACL role templates.\",\"method\":\"GET\",\"path\":\"/api/v1/platform/acl/roles\",\"tags\":[\"acl\",\"platform\"],\"parameters\":{\"type\":\"object\",\"properties\":{}}},{\"name\":\"bizing.acl.platform.permissions.list\",\"description\":\"List global ACL permission definitions.\",\"method\":\"GET\",\"path\":\"/api/v1/platform/acl/permissions\",\"tags\":[\"acl\",\"platform\"],\"parameters\":{\"type\":\"object\",\"properties\":{}}},{\"name\":\"bizing.acl.platform.assignments.create\",\"description\":\"Assign a platform ACL role to a user.\",\"method\":\"POST\",\"path\":\"/api/v1/platform/acl/assignments\",\"tags\":[\"acl\",\"platform\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"userId\":{\"type\":\"string\"},\"roleDefinitionId\":{\"type\":\"string\"}},\"required\":[\"userId\",\"roleDefinitionId\"]}},{\"name\":\"bizing.locations.list\",\"description\":\"List locations for one biz.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/locations\",\"tags\":[\"locations\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"page\":{\"type\":\"number\",\"default\":1},\"perPage\":{\"type\":\"number\",\"default\":20}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.locations.create\",\"description\":\"Create location in one biz.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/locations\",\"tags\":[\"locations\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"slug\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"timezone\":{\"type\":\"string\"}},\"required\":[\"bizId\",\"name\",\"slug\"]}},{\"name\":\"bizing.resources.list\",\"description\":\"List resources for one biz.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/resources\",\"tags\":[\"resources\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"locationId\":{\"type\":\"string\"}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.resources.create\",\"description\":\"Create resource in one biz.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/resources\",\"tags\":[\"resources\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"locationId\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"slug\":{\"type\":\"string\"}},\"required\":[\"bizId\",\"locationId\",\"type\",\"name\",\"slug\"]}},{\"name\":\"bizing.integrations.channelAccounts.list\",\"description\":\"List external integration channel accounts for one biz.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/channel-accounts\",\"tags\":[\"integrations\",\"channels\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"provider\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"page\":{\"type\":\"number\",\"default\":1},\"perPage\":{\"type\":\"number\",\"default\":20}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.integrations.channelAccounts.create\",\"description\":\"Create one external integration channel account in a biz.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/channel-accounts\",\"tags\":[\"integrations\",\"channels\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"provider\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"providerAccountRef\":{\"type\":\"string\"},\"scopes\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"authConfig\":{\"type\":\"object\"},\"metadata\":{\"type\":\"object\"}},\"required\":[\"bizId\",\"provider\",\"name\"]}},{\"name\":\"bizing.integrations.channelSyncStates.list\",\"description\":\"List channel sync states (cursor/sync health checkpoints).\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/channel-sync-states\",\"tags\":[\"integrations\",\"channels\",\"sync\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"channelAccountId\":{\"type\":\"string\"},\"objectType\":{\"type\":\"string\"}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.integrations.channelSyncStates.upsert\",\"description\":\"Create or update channel sync checkpoint state for one account/object type.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/channel-sync-states\",\"tags\":[\"integrations\",\"channels\",\"sync\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"channelAccountId\":{\"type\":\"string\"},\"objectType\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"inboundCursor\":{\"type\":\"string\"},\"outboundCursor\":{\"type\":\"string\"},\"lastFailure\":{\"type\":\"string\"},\"lastAttemptAt\":{\"type\":\"string\"},\"lastSuccessAt\":{\"type\":\"string\"},\"metadata\":{\"type\":\"object\"}},\"required\":[\"bizId\",\"channelAccountId\",\"objectType\",\"direction\"]}},{\"name\":\"bizing.integrations.channelEntityLinks.list\",\"description\":\"List local-to-external ID mappings for channels.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/channel-entity-links\",\"tags\":[\"integrations\",\"channels\",\"external-id\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"channelAccountId\":{\"type\":\"string\"},\"objectType\":{\"type\":\"string\"},\"isActive\":{\"type\":\"boolean\"},\"page\":{\"type\":\"number\",\"default\":1},\"perPage\":{\"type\":\"number\",\"default\":20}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.integrations.channelEntityLinks.create\",\"description\":\"Create one external ID mapping row for channel sync tracking.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/channel-entity-links\",\"tags\":[\"integrations\",\"channels\",\"external-id\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"channelAccountId\":{\"type\":\"string\"},\"objectType\":{\"type\":\"string\"},\"offerVersionId\":{\"type\":\"string\"},\"bookingOrderId\":{\"type\":\"string\"},\"resourceId\":{\"type\":\"string\"},\"customerUserId\":{\"type\":\"string\"},\"localReferenceKey\":{\"type\":\"string\"},\"externalObjectId\":{\"type\":\"string\"},\"externalParentId\":{\"type\":\"string\"},\"syncHash\":{\"type\":\"string\"},\"isActive\":{\"type\":\"boolean\"},\"metadata\":{\"type\":\"object\"}},\"required\":[\"bizId\",\"channelAccountId\",\"objectType\",\"externalObjectId\"]}},{\"name\":\"bizing.offers.list\",\"description\":\"List offers for one biz.\",\"method\":\"GET\",\"path\":\"/api/v1/bizes/{bizId}/offers\",\"tags\":[\"offers\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"executionMode\":{\"type\":\"string\"}},\"required\":[\"bizId\"]}},{\"name\":\"bizing.offers.create\",\"description\":\"Create offer in one biz.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/offers\",\"tags\":[\"offers\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"slug\":{\"type\":\"string\"},\"executionMode\":{\"type\":\"string\"}},\"required\":[\"bizId\",\"name\",\"slug\"]}},{\"name\":\"bizing.offers.createVersion\",\"description\":\"Create a new offer version.\",\"method\":\"POST\",\"path\":\"/api/v1/bizes/{bizId}/offers/{offerId}/versions\",\"tags\":[\"offers\",\"versions\"],\"parameters\":{\"type\":\"object\",\"properties\":{\"bizId\":{\"type\":\"string\"},\"offerId\":{\"type\":\"string\"},\"version\":{",
          "_size": 40018
        },
        "at": "2026-02-25T15:08:42.132Z"
      }
    ]
  },
  "metadata": {}
}
