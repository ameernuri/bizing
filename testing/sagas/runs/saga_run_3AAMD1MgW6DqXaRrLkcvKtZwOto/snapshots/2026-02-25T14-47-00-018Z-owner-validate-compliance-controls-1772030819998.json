{
  "schemaVersion": "snapshot.v1",
  "screenKey": "owner-validate-compliance-controls-1772030819998",
  "title": "Validate compliance and credential controls Snapshot",
  "generatedAt": "2026-02-25T14:47:00.015Z",
  "stepKey": "owner-validate-compliance-controls",
  "status": "passed",
  "view": {
    "title": "Validate compliance and credential controls",
    "subtitle": "Compliance controls verified through canonical API endpoint.",
    "blocks": [
      {
        "type": "alert",
        "title": "Owner Validate Compliance Controls completed",
        "message": "Compliance controls verified through canonical API endpoint.",
        "tone": "success"
      },
      {
        "type": "stats",
        "title": "What user sees at a glance",
        "items": [
          {
            "label": "PermissionCheckCount",
            "value": "5"
          }
        ]
      },
      {
        "type": "key_value",
        "title": "Screen details",
        "items": [
          {
            "label": "PermissionCheckCount",
            "value": "5"
          }
        ]
      }
    ]
  },
  "rawData": {
    "stepKey": "owner-validate-compliance-controls",
    "resultPayload": {
      "note": "Compliance controls verified through canonical API endpoint.",
      "evidence": {
        "permissionCheckCount": 5,
        "credentialTotals": {
          "totalCredentials": 0,
          "activeCredentials": 0,
          "revokedCredentials": 0,
          "expiredCredentials": 0,
          "samples": []
        },
        "auditControls": {
          "auditStreamsCount": 0,
          "auditEventsCount": 0,
          "auditIntegrityRunsCount": 0
        },
        "warnings": []
      }
    },
    "apiCalls": [
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAMDNZawCsdHsdhG3ogBVttKVu/traces",
        "status": 201,
        "requestBody": {
          "stepKey": "uc-need-validate-3",
          "title": "Validate explicit UC need #3 API Trace",
          "trace": {
            "stepKey": "uc-need-validate-3",
            "callCount": 0,
            "calls": []
          },
          "metadata": {
            "source": "rerun-sagas.ts"
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_artifact_3AAMFfg7dOfDxLz1v1hVJMmb49A",
            "sagaRunId": "saga_run_3AAMDNZawCsdHsdhG3ogBVttKVu",
            "sagaRunStepId": "saga_run_step_3AAMDN79ytR0psfeRipKoX2WkHS",
            "artifactType": "api_trace",
            "title": "Validate explicit UC need #3 API Trace",
            "storagePath": "testing/sagas/runs/saga_run_3AAMDNZawCsdHsdhG3ogBVttKVu/artifacts/1772030818965-Validate_explicit_UC_need__3_API_Trace.json",
            "contentType": "application/json",
            "bodyText": "{\n  \"stepKey\": \"uc-need-validate-3\",\n  \"callCount\": 0,\n  \"calls\": []\n}\n",
            "byteSize": 71,
            "checksum": "f772d82b3c72507aa65acc8221ab949db57e2ebb5409945754271e0b0aadde98",
            "capturedAt": "2026-02-25T14:46:59.112Z",
            "metadata": {
              "source": "rerun-sagas.ts"
            },
            "createdAt": "2026-02-25T14:46:59.112Z",
            "updatedAt": "2026-02-25T14:46:59.112Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "f73ec737-4332-48b8-a86a-4d1ea50168a9",
            "timestamp": "2026-02-25T14:46:59.206Z"
          }
        },
        "at": "2026-02-25T14:46:59.207Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAMDjUTXnk8dpqoZNmYAjt7GH5/steps/owner-calendar-review/result",
        "status": 200,
        "requestBody": {
          "status": "passed",
          "startedAt": "2026-02-25T14:46:58.851Z",
          "endedAt": "2026-02-25T14:46:58.851Z",
          "failureMessage": null,
          "resultPayload": {
            "note": "Operational timeline inputs fetched (bookings/resources/offers).",
            "evidence": {
              "bookingCount": 2,
              "resourceCount": 2,
              "offerCount": 1,
              "timezone": "UTC",
              "rangeLabel": "Upcoming schedule window",
              "bookingPreview": [
                {
                  "id": "booking_order_3AAMF7iijQedRbyozEL0fIp67zg",
                  "bizId": "3AAME0cPg7LQv2xv9wSYASUbkG7",
                  "offerId": "offer_3AAMEXPaBnQ63WhjTA0IVH1pMhB",
                  "offerVersionId": "offer_version_3AAMEennwom1jBiNxvYU12E9mve",
                  "customerUserId": "Z9ReNbq6j7ZezAgITmIfbOp7atZnef9S",
                  "customerGroupAccountId": null,
                  "status": "in_progress",
                  "statusConfigValueId": null,
                  "currency": "USD",
                  "subtotalMinor": 15000,
                  "taxMinor": 0,
                  "feeMinor": 0,
                  "discountMinor": 0,
                  "totalMinor": 15000,
                  "requestedStartAt": "2026-02-26T14:46:54.650Z",
                  "requestedEndAt": "2026-02-26T15:36:54.650Z",
                  "confirmedStartAt": "2026-02-26T14:46:54.650Z",
                  "confirmedEndAt": "2026-02-26T15:36:54.650Z",
                  "pricingSnapshot": {},
                  "policySnapshot": {},
                  "metadata": {},
                  "createdAt": "2026-02-25T14:46:54.679Z",
                  "updatedAt": "2026-02-25T14:46:54.679Z",
                  "deletedAt": null,
                  "createdBy": null,
                  "updatedBy": null,
                  "deletedBy": null
                },
                {
                  "id": "booking_order_3AAMF0cEmxSb64yRduTndGTVTe3",
                  "bizId": "3AAME0cPg7LQv2xv9wSYASUbkG7",
                  "offerId": "offer_3AAMEXPaBnQ63WhjTA0IVH1pMhB",
                  "offerVersionId": "offer_version_3AAMEennwom1jBiNxvYU12E9mve",
                  "customerUserId": "RSx6hcfTib5lJq242xzKYwJe9f32xiPf",
                  "customerGroupAccountId": null,
                  "status": "confirmed",
                  "statusConfigValueId": null,
                  "currency": "USD",
                  "subtotalMinor": 15000,
                  "taxMinor": 0,
                  "feeMinor": 0,
                  "discountMinor": 0,
                  "totalMinor": 15000,
                  "requestedStartAt": "2026-02-26T14:46:53.710Z",
                  "requestedEndAt": "2026-02-26T15:36:53.710Z",
                  "confirmedStartAt": "2026-02-26T14:46:53.710Z",
                  "confirmedEndAt": "2026-02-26T15:36:53.710Z",
                  "pricingSnapshot": {},
                  "policySnapshot": {},
                  "metadata": {},
                  "createdAt": "2026-02-25T14:46:53.728Z",
                  "updatedAt": "2026-02-25T14:46:53.728Z",
                  "deletedAt": null,
                  "createdBy": null,
                  "updatedBy": null,
                  "deletedBy": null
                }
              ]
            }
          },
          "assertionSummary": {
            "status": "passed",
            "hasFailure": false,
            "assertionsPassed": 1
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_run_step_3AAMDk9QjWq5Mk0kMvgoBvClrNm",
            "sagaRunId": "saga_run_3AAMDjUTXnk8dpqoZNmYAjt7GH5",
            "phaseKey": "operations-and-follow-up",
            "phaseOrder": 7,
            "phaseTitle": "Operations And Follow-up",
            "stepKey": "owner-calendar-review",
            "stepOrder": 18,
            "actorKey": "biz_owner",
            "instruction": "Query and compare availability + bookings timeline for the entities involved in this scenario.",
            "expectedResult": "Calendar state reflects booked slots, blocks, and any conflict outcomes from previous steps.",
            "delayMode": "none",
            "delayMs": null,
            "delayConditionKey": null,
            "delayTimeoutMs": null,
            "delayPollMs": null,
            "delayJitterMs": 0,
            "status": "passed",
            "attemptCount": 1,
            "startedAt": "2026-02-25T14:46:58.851Z",
            "endedAt": "2026-02-25T14:46:58.851Z",
            "failureCode": null,
            "failureMessage": null,
            "resultPayload": {
              "note": "Operational timeline inputs fetched (bookings/resources/offers).",
              "evidence": {
                "timezone": "UTC",
                "offerCount": 1,
                "rangeLabel": "Upcoming schedule window",
                "bookingCount": 2,
                "resourceCount": 2,
                "bookingPreview": [
                  {
                    "id": "booking_order_3AAMF7iijQedRbyozEL0fIp67zg",
                    "bizId": "3AAME0cPg7LQv2xv9wSYASUbkG7",
                    "status": "in_progress",
                    "offerId": "offer_3AAMEXPaBnQ63WhjTA0IVH1pMhB",
                    "currency": "USD",
                    "feeMinor": 0,
                    "metadata": {},
                    "taxMinor": 0,
                    "createdAt": "2026-02-25T14:46:54.679Z",
                    "createdBy": null,
                    "deletedAt": null,
                    "deletedBy": null,
                    "updatedAt": "2026-02-25T14:46:54.679Z",
                    "updatedBy": null,
                    "totalMinor": 15000,
                    "discountMinor": 0,
                    "subtotalMinor": 15000,
                    "confirmedEndAt": "2026-02-26T15:36:54.650Z",
                    "customerUserId": "Z9ReNbq6j7ZezAgITmIfbOp7atZnef9S",
                    "offerVersionId": "offer_version_3AAMEennwom1jBiNxvYU12E9mve",
                    "policySnapshot": {},
                    "requestedEndAt": "2026-02-26T15:36:54.650Z",
                    "pricingSnapshot": {},
                    "confirmedStartAt": "2026-02-26T14:46:54.650Z",
                    "requestedStartAt": "2026-02-26T14:46:54.650Z",
                    "statusConfigValueId": null,
                    "customerGroupAccountId": null
                  },
                  {
                    "id": "booking_order_3AAMF0cEmxSb64yRduTndGTVTe3",
                    "bizId": "3AAME0cPg7LQv2xv9wSYASUbkG7",
                    "status": "confirmed",
                    "offerId": "offer_3AAMEXPaBnQ63WhjTA0IVH1pMhB",
                    "currency": "USD",
                    "feeMinor": 0,
                    "metadata": {},
                    "taxMinor": 0,
                    "createdAt": "2026-02-25T14:46:53.728Z",
                    "createdBy": null,
                    "deletedAt": null,
                    "deletedBy": null,
                    "updatedAt": "2026-02-25T14:46:53.728Z",
                    "updatedBy": null,
                    "totalMinor": 15000,
                    "discountMinor": 0,
                    "subtotalMinor": 15000,
                    "confirmedEndAt": "2026-02-26T15:36:53.710Z",
                    "customerUserId": "RSx6hcfTib5lJq242xzKYwJe9f32xiPf",
                    "offerVersionId": "offer_version_3AAMEennwom1jBiNxvYU12E9mve",
                    "policySnapshot": {},
                    "requestedEndAt": "2026-02-26T15:36:53.710Z",
                    "pricingSnapshot": {},
                    "confirmedStartAt": "2026-02-26T14:46:53.710Z",
                    "requestedStartAt": "2026-02-26T14:46:53.710Z",
                    "statusConfigValueId": null,
                    "customerGroupAccountId": null
                  }
                ]
              }
            },
            "assertionSummary": {
              "status": "passed",
              "hasFailure": false,
              "assertionsPassed": 1
            },
            "metadata": {},
            "createdAt": "2026-02-25T14:46:43.284Z",
            "updatedAt": "2026-02-25T14:46:43.284Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "22455ea1-0fe1-4376-8d0f-1ee757dadff6",
            "timestamp": "2026-02-25T14:46:59.208Z"
          }
        },
        "at": "2026-02-25T14:46:59.208Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAMEI2ibLUzm4D7r0NK7R4XynG/steps/owner-publish-catalog/result",
        "status": 200,
        "requestBody": {
          "status": "passed",
          "startedAt": "2026-02-25T14:46:58.784Z",
          "endedAt": "2026-02-25T14:46:58.784Z",
          "failureMessage": null,
          "resultPayload": {
            "note": "Offer published and activated."
          },
          "assertionSummary": {
            "status": "passed",
            "hasFailure": false,
            "assertionsPassed": 1
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_run_step_3AAMEJ2Tn9LQiXGGr28LJpfeZjp",
            "sagaRunId": "saga_run_3AAMEI2ibLUzm4D7r0NK7R4XynG",
            "phaseKey": "catalog-publish",
            "phaseOrder": 4,
            "phaseTitle": "Catalog And Publish",
            "stepKey": "owner-publish-catalog",
            "stepOrder": 10,
            "actorKey": "biz_owner",
            "instruction": "Update offer publish/lifecycle flags so customer actors can discover it.",
            "expectedResult": "Offer appears as published/active and can be returned in customer-facing list queries.",
            "delayMode": "none",
            "delayMs": null,
            "delayConditionKey": null,
            "delayTimeoutMs": null,
            "delayPollMs": null,
            "delayJitterMs": 0,
            "status": "passed",
            "attemptCount": 1,
            "startedAt": "2026-02-25T14:46:58.784Z",
            "endedAt": "2026-02-25T14:46:58.784Z",
            "failureCode": null,
            "failureMessage": null,
            "resultPayload": {
              "note": "Offer published and activated."
            },
            "assertionSummary": {
              "status": "passed",
              "hasFailure": false,
              "assertionsPassed": 1
            },
            "metadata": {},
            "createdAt": "2026-02-25T14:46:48.759Z",
            "updatedAt": "2026-02-25T14:46:48.759Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "6d6364d2-6c3c-4a7f-82f6-7ca3c7219310",
            "timestamp": "2026-02-25T14:46:59.217Z"
          }
        },
        "at": "2026-02-25T14:46:59.217Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3AAMFUUqos9XIL70ALbD8TBDruJ/steps/owner-sign-up/result",
        "status": 200,
        "requestBody": {
          "status": "in_progress",
          "startedAt": "2026-02-25T14:46:59.142Z",
          "resultPayload": {
            "note": "Started owner-sign-up"
          },
          "assertionSummary": {
            "status": "in_progress"
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_run_step_3AAMFPR9EjBTeuWBUdVH2kBmoh3",
            "sagaRunId": "saga_run_3AAMFUUqos9XIL70ALbD8TBDruJ",
            "phaseKey": "owner-onboarding",
            "phaseOrder": 1,
            "phaseTitle": "Owner Onboarding",
            "stepKey": "owner-sign-up",
            "stepOrder": 1,
            "actorKey": "biz_owner",
            "instruction": "Create or login the owner account through Better Auth endpoints, then verify session context can call authenticated API routes.",
            "expectedResult": "Owner session exists and authenticated routes return success for this user.",
            "delayMode": "none",
            "delayMs": null,
            "delayConditionKey": null,
            "delayTimeoutMs": null,
            "delayPollMs": null,
            "delayJitterMs": 0,
            "status": "in_progress",
            "attemptCount": 1,
            "startedAt": "2026-02-25T14:46:59.142Z",
            "endedAt": null,
            "failureCode": null,
            "failureMessage": null,
            "resultPayload": {
              "note": "Started owner-sign-up"
            },
            "assertionSummary": {
              "status": "in_progress"
            },
            "metadata": {},
            "createdAt": "2026-02-25T14:46:57.790Z",
            "updatedAt": "2026-02-25T14:46:57.790Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "1df674ed-bbf8-4f49-ab47-9bb14019b001",
            "timestamp": "2026-02-25T14:46:59.249Z"
          }
        },
        "at": "2026-02-25T14:46:59.250Z"
      },
      {
        "method": "GET",
        "path": "/api/v1/bizes/3AAMDN5689tiijMp5WCfSJ4GZgQ/compliance/controls",
        "status": 200,
        "responseBody": {
          "success": true,
          "data": {
            "bizId": "3AAMDN5689tiijMp5WCfSJ4GZgQ",
            "evaluatedAt": "2026-02-25T14:46:59.256Z",
            "accessControls": {
              "actorUserId": "n1sZmxkoRU3I056ePPa62zeC77c08bew",
              "actorRole": "user",
              "sensitivePermissionChecks": [
                {
                  "permissionKey": "booking_orders.read",
                  "allowed": true,
                  "reason": "allow at highest specificity",
                  "scopeType": "platform"
                },
                {
                  "permissionKey": "booking_orders.update",
                  "allowed": true,
                  "reason": "allow at highest specificity",
                  "scopeType": "platform"
                },
                {
                  "permissionKey": "members.read",
                  "allowed": true,
                  "reason": "allow at highest specificity",
                  "scopeType": "platform"
                },
                {
                  "permissionKey": "acl.read",
                  "allowed": true,
                  "reason": "allow at highest specificity",
                  "scopeType": "platform"
                },
                {
                  "permissionKey": "sagas.read",
                  "allowed": true,
                  "reason": "allow at highest specificity",
                  "scopeType": "platform"
                }
              ]
            },
            "privacyControls": {
              "tenantScopeEnforced": true,
              "crossBizIsolationEnforced": true
            },
            "credentialControls": {
              "totalCredentials": 0,
              "activeCredentials": 0,
              "revokedCredentials": 0,
              "expiredCredentials": 0,
              "samples": []
            },
            "auditControls": {
              "auditStreamsCount": 0,
              "auditEventsCount": 0,
              "auditIntegrityRunsCount": 0
            },
            "warnings": []
          },
          "meta": {
            "requestId": "24fa2423-9a46-4f5d-8cf2-22966ff5aa26",
            "timestamp": "2026-02-25T14:46:59.256Z"
          }
        },
        "at": "2026-02-25T14:46:59.257Z"
      }
    ]
  },
  "metadata": {}
}
