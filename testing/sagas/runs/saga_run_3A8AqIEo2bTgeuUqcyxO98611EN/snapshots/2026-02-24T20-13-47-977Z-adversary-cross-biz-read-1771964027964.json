{
  "schemaVersion": "snapshot.v1",
  "screenKey": "adversary-cross-biz-read-1771964027964",
  "title": "Adversary attempts unauthorized cross-biz read Snapshot",
  "generatedAt": "2026-02-24T20:13:47.974Z",
  "stepKey": "adversary-cross-biz-read",
  "status": "passed",
  "view": {
    "title": "Adversary attempts unauthorized cross-biz read",
    "subtitle": "Cross-biz read blocked for non-member account.",
    "blocks": [
      {
        "type": "alert",
        "title": "Adversary Cross Biz Read completed",
        "message": "Cross-biz read blocked for non-member account.",
        "tone": "success"
      },
      {
        "type": "key_value",
        "title": "Screen details",
        "items": [
          {
            "label": "AdversaryUserId",
            "value": "DbPBmmBKqh3BbxCHndwVqVfXYlK87HQn"
          }
        ]
      }
    ]
  },
  "rawData": {
    "stepKey": "adversary-cross-biz-read",
    "resultPayload": {
      "note": "Cross-biz read blocked for non-member account.",
      "evidence": {
        "adversaryUserId": "DbPBmmBKqh3BbxCHndwVqVfXYlK87HQn"
      }
    },
    "apiCalls": [
      {
        "method": "GET",
        "path": "/api/v1/bizes/3A8AqHsvEBsVrcfowy5MNqckCv0/booking-orders?perPage=20",
        "status": 200,
        "responseBody": {
          "success": true,
          "data": [
            {
              "id": "booking_order_3A8Arw8wPUZmKQ16XjLdrmjpfhA",
              "bizId": "3A8AqHsvEBsVrcfowy5MNqckCv0",
              "offerId": "offer_3A8Ar39xCPm4IjImmHPbUf0mE7i",
              "offerVersionId": "offer_version_3A8Ar56mUP7OCpe0bhkdO1GQVHi",
              "customerUserId": "fKlZkb3JccMTa7McfLbrxWjcTtScrxEv",
              "customerGroupAccountId": null,
              "status": "confirmed",
              "statusConfigValueId": null,
              "currency": "USD",
              "subtotalMinor": 15000,
              "taxMinor": 0,
              "feeMinor": 0,
              "discountMinor": 0,
              "totalMinor": 15000,
              "requestedStartAt": "2026-02-25T20:13:45.438Z",
              "requestedEndAt": "2026-02-25T21:03:45.438Z",
              "confirmedStartAt": "2026-02-25T20:13:45.438Z",
              "confirmedEndAt": "2026-02-25T21:03:45.438Z",
              "pricingSnapshot": {},
              "policySnapshot": {},
              "metadata": {},
              "createdAt": "2026-02-24T20:13:45.448Z",
              "updatedAt": "2026-02-24T20:13:45.448Z",
              "deletedAt": null,
              "createdBy": null,
              "updatedBy": null,
              "deletedBy": null
            },
            {
              "id": "booking_order_3A8Aro2l5nM2iMIqlRQiLOZmGNz",
              "bizId": "3A8AqHsvEBsVrcfowy5MNqckCv0",
              "offerId": "offer_3A8Ar39xCPm4IjImmHPbUf0mE7i",
              "offerVersionId": "offer_version_3A8Ar56mUP7OCpe0bhkdO1GQVHi",
              "customerUserId": "r2Sy0e3WdGdowG7KkGN7eLcecKH1R25q",
              "customerGroupAccountId": null,
              "status": "confirmed",
              "statusConfigValueId": null,
              "currency": "USD",
              "subtotalMinor": 15000,
              "taxMinor": 0,
              "feeMinor": 0,
              "discountMinor": 0,
              "totalMinor": 15000,
              "requestedStartAt": "2026-02-25T20:13:44.642Z",
              "requestedEndAt": "2026-02-25T21:03:44.642Z",
              "confirmedStartAt": "2026-02-25T20:13:44.642Z",
              "confirmedEndAt": "2026-02-25T21:03:44.642Z",
              "pricingSnapshot": {},
              "policySnapshot": {},
              "metadata": {},
              "createdAt": "2026-02-24T20:13:44.651Z",
              "updatedAt": "2026-02-24T20:13:44.651Z",
              "deletedAt": null,
              "createdBy": null,
              "updatedBy": null,
              "deletedBy": null
            }
          ],
          "meta": {
            "requestId": "40548f3c-1564-4154-8cb1-d6171b1736f4",
            "timestamp": "2026-02-24T20:13:47.452Z"
          },
          "pagination": {
            "page": 1,
            "perPage": 20,
            "total": 2,
            "hasMore": false
          }
        },
        "at": "2026-02-24T20:13:47.453Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3A8Aq4CxMswnQ8gewCPKdx06MvV/steps/member-review-bookings/result",
        "status": 200,
        "requestBody": {
          "status": "in_progress",
          "startedAt": "2026-02-24T20:13:47.405Z",
          "resultPayload": {
            "note": "Started member-review-bookings"
          },
          "assertionSummary": {
            "status": "in_progress"
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_run_step_3A8Aq2BTFJKNsJ8TqgGhLB8xPxO",
            "sagaRunId": "saga_run_3A8Aq4CxMswnQ8gewCPKdx06MvV",
            "phaseKey": "operations-and-follow-up",
            "phaseOrder": 7,
            "phaseTitle": "Operations And Follow-up",
            "stepKey": "member-review-bookings",
            "stepOrder": 17,
            "actorKey": "biz_member",
            "instruction": "As biz member, list bookings and progress one booking through operational status updates.",
            "expectedResult": "Authorized role can update status while preserving auditability and lifecycle consistency.",
            "status": "in_progress",
            "attemptCount": 1,
            "startedAt": "2026-02-24T20:13:47.405Z",
            "endedAt": null,
            "failureCode": null,
            "failureMessage": null,
            "resultPayload": {
              "note": "Started member-review-bookings"
            },
            "assertionSummary": {
              "status": "in_progress"
            },
            "metadata": {},
            "createdAt": "2026-02-24T20:13:30.048Z",
            "updatedAt": "2026-02-24T20:13:30.048Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "5cee231f-026b-4ce4-88ab-5e3515e44e32",
            "timestamp": "2026-02-24T20:13:47.572Z"
          }
        },
        "at": "2026-02-24T20:13:47.573Z"
      },
      {
        "method": "POST",
        "path": "/api/v1/sagas/runs/saga_run_3A8ApyTBOFnS75mUPXcbSiPbrTB/snapshots",
        "status": 201,
        "requestBody": {
          "stepKey": "customer-advanced-payment-flow",
          "screenKey": "customer-advanced-payment-flow-1771964027389",
          "title": "Customer uses advanced payment instruments Snapshot",
          "status": "passed",
          "route": "/sagas/saga_run_3A8ApyTBOFnS75mUPXcbSiPbrTB/customer-advanced-payment-flow",
          "format": "json",
          "view": {
            "title": "Customer uses advanced payment instruments",
            "subtitle": "Advanced split-tender flow executed and traceable through intent/tender/line allocations.",
            "blocks": [
              {
                "type": "alert",
                "title": "Customer Advanced Payment Flow completed",
                "message": "Advanced split-tender flow executed and traceable through intent/tender/line allocations.",
                "tone": "success"
              },
              {
                "type": "stats",
                "title": "What user sees at a glance",
                "items": [
                  {
                    "label": "AmountTargetMinor",
                    "value": "15500"
                  },
                  {
                    "label": "AmountCapturedMinor",
                    "value": "15500"
                  },
                  {
                    "label": "TenderCount",
                    "value": "2"
                  },
                  {
                    "label": "LineAllocationCount",
                    "value": "3"
                  },
                  {
                    "label": "TransactionCount",
                    "value": "2"
                  },
                  {
                    "label": "TransactionLineAllocationCount",
                    "value": "3"
                  }
                ]
              },
              {
                "type": "key_value",
                "title": "Screen details",
                "items": [
                  {
                    "label": "PaymentIntentId",
                    "value": "payment_intent_3A8As0n1WTqhaDevcCRNmxkrS5k"
                  },
                  {
                    "label": "AmountTargetMinor",
                    "value": "15500"
                  },
                  {
                    "label": "AmountCapturedMinor",
                    "value": "15500"
                  },
                  {
                    "label": "IntentStatus",
                    "value": "succeeded"
                  },
                  {
                    "label": "TenderCount",
                    "value": "2"
                  },
                  {
                    "label": "LineAllocationCount",
                    "value": "3"
                  },
                  {
                    "label": "TransactionCount",
                    "value": "2"
                  },
                  {
                    "label": "TransactionLineAllocationCount",
                    "value": "3"
                  },
                  {
                    "label": "HasIntentInList",
                    "value": "true"
                  }
                ]
              }
            ]
          },
          "rawData": {
            "stepKey": "customer-advanced-payment-flow",
            "resultPayload": {
              "note": "Advanced split-tender flow executed and traceable through intent/tender/line allocations.",
              "evidence": {
                "paymentIntentId": "payment_intent_3A8As0n1WTqhaDevcCRNmxkrS5k",
                "amountTargetMinor": 15500,
                "amountCapturedMinor": 15500,
                "intentStatus": "succeeded",
                "tenderCount": 2,
                "lineAllocationCount": 3,
                "transactionCount": 2,
                "transactionLineAllocationCount": 3,
                "hasIntentInList": true
              }
            },
            "apiCalls": [
              {
                "method": "POST",
                "path": "/api/v1/bizes/3A8AqB3OemoYsAVrjNFBLOHfpiL/booking-orders",
                "status": 403,
                "requestBody": {
                  "offerId": "offer_3A8AqgnDN8qllOjbRztUADmekZ2",
                  "offerVersionId": "offer_version_3A8Aqoxa2DZXSHJnJwbh7IndUzM",
                  "status": "draft",
                  "subtotalMinor": 1000,
                  "taxMinor": 0,
                  "feeMinor": 0,
                  "discountMinor": 0,
                  "totalMinor": 1000,
                  "currency": "USD"
                },
                "responseBody": {
                  "success": false,
                  "error": {
                    "code": "FORBIDDEN",
                    "message": "You are not a member of this biz."
                  },
                  "meta": {
                    "requestId": "94d17228-9545-44b0-a3af-70b86fa1c134",
                    "timestamp": "2026-02-24T20:13:46.766Z"
                  }
                },
                "at": "2026-02-24T20:13:46.768Z"
              }
            ]
          }
        },
        "responseBody": {
          "success": true,
          "data": {
            "id": "saga_artifact_3A8As9k5f3eByZABQpKuqoFkLS0",
            "sagaRunId": "saga_run_3A8ApyTBOFnS75mUPXcbSiPbrTB",
            "sagaRunStepId": "saga_run_step_3A8Aq1y7oY6hmE7Hl2ovbRynWrk",
            "artifactType": "snapshot",
            "title": "Customer uses advanced payment instruments Snapshot",
            "storagePath": "testing/sagas/runs/saga_run_3A8ApyTBOFnS75mUPXcbSiPbrTB/snapshots/2026-02-24T20-13-47-414Z-customer-advanced-payment-flow-1771964027389.json",
            "contentType": "application/json",
            "bodyText": "{\n  \"schemaVersion\": \"snapshot.v1\",\n  \"screenKey\": \"customer-advanced-payment-flow-1771964027389\",\n  \"title\": \"Customer uses advanced payment instruments Snapshot\",\n  \"generatedAt\": \"2026-02-24T20:13:47.402Z\",\n  \"stepKey\": \"customer-advanced-payment-flow\",\n  \"status\": \"passed\",\n  \"view\": {\n    \"title\": \"Customer uses advanced payment instruments\",\n    \"subtitle\": \"Advanced split-tender flow executed and traceable through intent/tender/line allocations.\",\n    \"blocks\": [\n      {\n        \"type\": \"alert\",\n        \"title\": \"Customer Advanced Payment Flow completed\",\n        \"message\": \"Advanced split-tender flow executed and traceable through intent/tender/line allocations.\",\n        \"tone\": \"success\"\n      },\n      {\n        \"type\": \"stats\",\n        \"title\": \"What user sees at a glance\",\n        \"items\": [\n          {\n            \"label\": \"AmountTargetMinor\",\n            \"value\": \"15500\"\n          },\n          {\n            \"label\": \"AmountCapturedMinor\",\n            \"value\": \"15500\"\n          },\n          {\n            \"label\": \"TenderCount\",\n            \"value\": \"2\"\n          },\n          {\n            \"label\": \"LineAllocationCount\",\n            \"value\": \"3\"\n          },\n          {\n            \"label\": \"TransactionCount\",\n            \"value\": \"2\"\n          },\n          {\n            \"label\": \"TransactionLineAllocationCount\",\n            \"value\": \"3\"\n          }\n        ]\n      },\n      {\n        \"type\": \"key_value\",\n        \"title\": \"Screen details\",\n        \"items\": [\n          {\n            \"label\": \"PaymentIntentId\",\n            \"value\": \"payment_intent_3A8As0n1WTqhaDevcCRNmxkrS5k\"\n          },\n          {\n            \"label\": \"AmountTargetMinor\",\n            \"value\": \"15500\"\n          },\n          {\n            \"label\": \"AmountCapturedMinor\",\n            \"value\": \"15500\"\n          },\n          {\n            \"label\": \"IntentStatus\",\n            \"value\": \"succeeded\"\n          },\n          {\n            \"label\": \"TenderCount\",\n            \"value\": \"2\"\n          },\n          {\n            \"label\": \"LineAllocationCount\",\n            \"value\": \"3\"\n          },\n          {\n            \"label\": \"TransactionCount\",\n            \"value\": \"2\"\n          },\n          {\n            \"label\": \"TransactionLineAllocationCount\",\n            \"value\": \"3\"\n          },\n          {\n            \"label\": \"HasIntentInList\",\n            \"value\": \"true\"\n          }\n        ]\n      }\n    ]\n  },\n  \"rawData\": {\n    \"stepKey\": \"customer-advanced-payment-flow\",\n    \"resultPayload\": {\n      \"note\": \"Advanced split-tender flow executed and traceable through intent/tender/line allocations.\",\n      \"evidence\": {\n        \"paymentIntentId\": \"payment_intent_3A8As0n1WTqhaDevcCRNmxkrS5k\",\n        \"amountTargetMinor\": 15500,\n        \"amountCapturedMinor\": 15500,\n        \"intentStatus\": \"succeeded\",\n        \"tenderCount\": 2,\n        \"lineAllocationCount\": 3,\n        \"transactionCount\": 2,\n        \"transactionLineAllocationCount\": 3,\n        \"hasIntentInList\": true\n      }\n    },\n    \"apiCalls\": [\n      {\n        \"method\": \"POST\",\n        \"path\": \"/api/v1/bizes/3A8AqB3OemoYsAVrjNFBLOHfpiL/booking-orders\",\n        \"status\": 403,\n        \"requestBody\": {\n          \"offerId\": \"offer_3A8AqgnDN8qllOjbRztUADmekZ2\",\n          \"offerVersionId\": \"offer_version_3A8Aqoxa2DZXSHJnJwbh7IndUzM\",\n          \"status\": \"draft\",\n          \"subtotalMinor\": 1000,\n          \"taxMinor\": 0,\n          \"feeMinor\": 0,\n          \"discountMinor\": 0,\n          \"totalMinor\": 1000,\n          \"currency\": \"USD\"\n        },\n        \"responseBody\": {\n          \"success\": false,\n          \"error\": {\n            \"code\": \"FORBIDDEN\",\n            \"message\": \"You are not a member of this biz.\"\n          },\n          \"meta\": {\n            \"requestId\": \"94d17228-9545-44b0-a3af-70b86fa1c134\",\n            \"timestamp\": \"2026-02-24T20:13:46.766Z\"\n          }\n        },\n        \"at\": \"2026-02-24T20:13:46.768Z\"\n      }\n    ]\n  },\n  \"metadata\": {}\n}\n",
            "byteSize": 3929,
            "checksum": "4af590f86accde516766dbe5560a3d004646e1eda2283a065105011654034e22",
            "capturedAt": "2026-02-24T20:13:47.431Z",
            "metadata": {
              "format": "json",
              "stepKey": "customer-advanced-payment-flow",
              "screenKey": "customer-advanced-payment-flow-1771964027389",
              "sourceFormat": "v1",
              "schemaVersion": "snapshot.v1"
            },
            "createdAt": "2026-02-24T20:13:47.431Z",
            "updatedAt": "2026-02-24T20:13:47.431Z",
            "deletedAt": null,
            "createdBy": null,
            "updatedBy": null,
            "deletedBy": null
          },
          "meta": {
            "requestId": "4662fe00-571a-47fa-8c25-eff7e106752a",
            "timestamp": "2026-02-24T20:13:47.572Z"
          }
        },
        "at": "2026-02-24T20:13:47.579Z"
      }
    ]
  },
  "metadata": {}
}
